<!DOCTYPE html>
<html lang="en">

<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-153514321-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-153514321-1');
    </script>
    <script src="js/scripty.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/design.css">
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/bootstrap.css">
    <title>AM4 Calculator - Cargo Configuration</title>
</head>

<body class="cargo-page">
    <div id="backover"></div>
    <div class="result-box" style="position: absolute;">
        <button class="result-close"></button>
        <div class="result-content">
            <h5>Results</h5>
            <span>Recommended settings</span>
            <hr>
            <span>Seats:</span>
            <div class="label-item">Demand Large: <span class="label-result result-demand-large"></span></div>
            <div class="label-item">Demand Heavy: <span class="label-result result-demand-heavy"></span></div>

        </div>
    </div>
    <a href="index.html"><button class="model-button back-button">Back</button></a>
    <section>
        <div class="container">
            <div class="content-all">
                <div class="content-box">
                    <h2>Cargo Configuration</h2>
                    <form id="cargo-configuration-form" method="POST" autocomplete="off">
                        <input type="text" name="input-demand-large" placeholder="Demand(Large)" required>
                        <input type="text" name="input-demand-heavy" placeholder="Demand(Heavy)" required>
                        <!-- <input type="text" name="input-capacity" placeholder="Field C" required> -->
                        <button class="model-button" onclick="calcSeats()">Calculate</button>
                    </form>
                </div>
            </div>
        </div>
    </section>
    <script src="js/library/popper.js"></script>
    <script src="js/library/jquery.js"></script>
    <script src="js/library/bootstrap.js"></script>
    <script src="js/utils/Format.js "></script>
    <script src="js/control/main.js "></script>
    <script src="js/app.js "></script>
    <script>
        app.centralize(document.querySelector('.cargo-page section'));

        app.el.cargoConfigurationForm.on('submit', (e) => {

            e.preventDefault();
            let input = app.el.cargoConfigurationForm.querySelectorAll('input');
            let views = document.querySelectorAll('.result-box .result-content .label-item .label-result');
            let isValid = true;
            let values = {
                demandLarge: 0,
                demandHeavy: 0,
                capacity: 0
            };

            [...input].forEach((element) => {
                if (!isValid) return;
                if (!element.value) {
                    isValid = false;
                    return;
                } else if (element.value < 0) {
                    isValid = false;
                    return;
                }
                switch (element.name) {
                    case 'input-demand-large':
                        values.demandLarge = element.value;
                        break;
                    case 'input-demand-heavy':
                        values.demandHeavy = element.value;
                        break;
                        // case 'input-capacity':
                        //     values.capacity = element.value;
                        //     break;
                }
            });
            if (!isValid) {
                alert('Please fill in all fields for the calculation to be done correctly! ;)');
                return;
            };

            let result = app.cargoSeats(values.demandLarge, values.demandHeavy, values.capacity);

            [...views].forEach((label) => {
                if (label.classList.contains('result-demand-large')) label.innerText = result._resultLarge;
                if (label.classList.contains('result-demand-heavy')) label.innerText = result._resultHeavy;
            });

            app.centralize(document.querySelector('.cargo-page .result-box'));
            toggleOver([document.querySelector('.cargo-page .result-box')], ['click']);

        });

        document.querySelector('.cargo-page .result-box .result-close').on('click', (e) => {
            toggleOver(null, null);
        });
    </script>
</body>

</html>